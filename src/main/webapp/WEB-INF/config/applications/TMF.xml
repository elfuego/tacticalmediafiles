<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE application PUBLIC "-//MMBase//DTD application config 1.1//EN" "http://www.mmbase.org/dtd/application_1_1.dtd">
<application name="TMF" maintainer="tacticalmediafiles.net" version="1" auto-deploy="false">
  <requirements>
    <requires name="Resources" maintainer="mmbase.org" version="1" />
    <requires name="Media" maintainer="mediaproject.mmbase.org" version="1" />
    <requires name="Streams" maintainer="streams.mmbase.org" version="6" />
  </requirements>

  <neededbuilderlist>
    <builder maintainer="mmbase.org"  version="0">insrel</builder>
    <builder maintainer="www.mmbase.org"  version="0">posrel</builder>
    
    <builder maintainer="debalie.org"  version="1">person</builder>
    <builder maintainer="debalie.org"  version="1">organisation</builder>
    <builder maintainer="debalie.org"  version="1">type</builder>
    <builder maintainer="debalie.org"  version="1">copyright</builder>
    <builder maintainer="mmbase.org"   version="0">email</builder>
    <builder maintainer="mmbase.org"   version="0">picture</builder>
    <builder maintainer="debalie.org"  version="1">article</builder>
    <builder maintainer="balie.org"    version="0">metadata</builder>
    <builder maintainer="debalie.org"  version="1">dates</builder>
    <builder maintainer="debalie.org"  version="1">media</builder>
    <builder maintainer="debalie.org"  version="1">event</builder>
    <builder maintainer="debalie.org"  version="1">file</builder>
    <builder maintainer="debalie.org"  version="1">url</builder>
    <builder maintainer="debalie.org"  version="1">keyword</builder>
    <builder maintainer="debalie.org"  version="1">campaign</builder>
    <builder maintainer="debalie.org"  version="1">address</builder>
    
    <builder maintainer="mmbase.org"  version="1">mediafragments</builder>
    <builder maintainer="mmbase.org"  version="1">video</builder>
  </neededbuilderlist>

  <neededreldeflist>
    <reldef source="related"     target="related" direction="bidirectional" guisourcename="Related" guitargetname="Related"             builder="insrel" />
    <reldef source="posrel"      target="posrel" direction="bidirectional" guisourcename="Posrel" guitargetname="Posrel"                builder="posrel" />
    <reldef source="coordinator" target="coordinator" direction="bidirectional" guisourcename="Coordinator" guitargetname="Coordinator" builder="insrel" />
    <reldef source="author"      target="author" direction="bidirectional" guisourcename="Author" guitargetname="Author"                builder="insrel" />
  </neededreldeflist>

  <allowedrelationlist>
    <relation from="article"  to="person" type="author" />
    <relation from="article" to="type" type="related" />
    <relation from="article" to="person" type="related" />
    <relation from="article" to="dates" type="related" />
    <relation from="article" to="organisation" type="related" />
    <relation from="article" to="copyright" type="related" />
    <relation from="article" to="file" type="related" />
    <relation from="article" to="event" type="related" />
    <relation from="file" to="copyright" type="related" />
    <relation from="media" to="copyright" type="related" />
    <relation from="file" to="picture" type="related" />
    <relation from="file" to="media" type="related" />
    <relation from="file" to="type" type="related" />    
    <relation from="file" to="article" type="related" />
    <relation from="media" to="type" type="related" />
    <relation from="event" to="type" type="related" />
    <relation from="event" to="dates" type="related" />
    <relation from="event" to="organisation" type="related" />
    <relation from="event" to="person" type="related" />
    <relation from="event" to="person" type="coordinator" />
    <relation from="event" to="keyword" type="related" />
    <relation from="event" to="address" type="related" />
    <relation from="event" to="article" type="related" />
    <relation from="organisation" to="address" type="related" />
    <relation from="organisation" to="type" type="related" />    
    <relation from="organisation" to="person" type="related" />
    <relation from="media" to="picture" type="posrel" />
    <relation from="organisation" to="article" type="related" />
																																		    <relation from="organisation" to="dates" type="related" />
    <relation from="organisation" to="event" type="related" />
    <relation from="person" to="type" type="related" />
    <relation from="person" to="dates" type="related" />
    <relation from="person" to="address" type="related" />
    <relation from="person" to="article" type="related" />
    <relation from="event" to="file" type="related" />
    <relation from="person" to="organisation" type="related" />
    <relation from="person" to="event" type="related" />
    <relation from="media" to="file" type="related" />
    <relation from="person" to="url" type="related" />
    <relation from="article" to="keyword" type="related" />
    <relation from="file" to="keyword" type="related" />
    <relation from="picture" to="keyword" type="related" />
    <relation from="event" to="picture" type="posrel" />
    <relation from="article" to="picture" type="posrel" />
    <relation from="file" to="picture" type="posrel" />
    <relation from="person" to="picture" type="posrel" />
    <relation from="organisation" to="picture" type="posrel" />
    
    <relation from="media" to="video" type="posrel" />
    <relation from="video" to="video" type="posrel" />
    <relation from="video" to="person" type="posrel" />
    <relation from="video" to="url" type="posrel" />
    <relation from="video" to="metadata" type="related" />
    <relation from="video" to="file" type="related" />
    <relation from="video" to="event" type="related" />
    <relation from="video" to="organisation" type="related" />
    <relation from="video" to="article" type="related" />
    <!-- <relation from="video" to="templates" type="related" /> -->
    <relation from="video" to="url" type="posrel" />

    <relation from="campaign" to="keyword" type="related" />
    <relation from="article" to="url" type="related" />
    <relation from="event" to="url" type="related" />
    <relation from="person" to="keyword" type="related" />
    <relation from="article" to="media" type="related" />
    <relation from="campaign" to="article" type="related" />
    <relation from="campaign" to="person" type="author" />
    <relation from="campaign" to="person" type="related" />
    <relation from="campaign" to="event" type="related" />
    <relation from="campaign" to="organisation" type="related" />
    <relation from="campaign" to="url" type="related" />
    <relation from="campaign" to="picture" type="posrel" />
    <relation from="campaign" to="file" type="related" />
  </allowedrelationlist>

  <datasourcelist>
    <datasource builder="person" path="TMF/person.xml" />         
    <datasource builder="organisation" path="TMF/organisation.xml" />   
    <datasource builder="type" path="TMF/type.xml" />           
    <datasource builder="copyright" path="TMF/copyright.xml" />
    <datasource builder="picture" path="TMF/picture.xml" />
    <datasource builder="article" path="TMF/article.xml" />
    <datasource builder="metadata" path="TMF/metadata.xml" />
    <datasource builder="dates" path="TMF/dates.xml" />
    <datasource builder="media" path="TMF/media.xml" />          
    <datasource builder="event" path="TMF/event.xml" />          
    <datasource builder="file" path="TMF/file.xml" />           
    <datasource builder="url" path="TMF/url.xml" />            
    <datasource builder="keyword" path="TMF/keyword.xml" />        
    <datasource builder="campaign" path="TMF/campaign.xml" />
    <datasource builder="address" path="TMF/address.xml" />	   
    
    <datasource builder="mediafragments" path="TMF/mediafragments.xml" />
    <datasource builder="video" path="TMF/video.xml" />
  </datasourcelist>

  <relationsourcelist>
    <relationsource builder="insrel" path="TMF/insrel.xml" />         
    <relationsource builder="posrel" path="TMF/posrel.xml" />         
  </relationsourcelist>

  <contextsourcelist>
	<contextsource path="TMF/backup.xml" type="depth" goal="backup" />
    <!-- <contextsource path="/tmp" type="full" goal="backup" /> -->
  </contextsourcelist>

  <afterdeployment />

  <description>
    Installs builders and relations for the TMF archive website.
    This application uses the Resource-application, the Media application (downloadable at mmbase.org) and the cloudcontextsecurity application.
  </description>

  <install-notice>TMF installed.</install-notice>
</application>
