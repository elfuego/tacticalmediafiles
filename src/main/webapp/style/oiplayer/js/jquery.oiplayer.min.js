!function(t){"use strict";function e(){this.myname="super"}function i(){this.myname="mediaplayer"}function a(){this.myname="cortadoplayer"}function r(){this.myname="msie_cortadoplayer"}function o(){this.myname="flowplayer"}var n={init:function(s){var d={server:"http://www.openimages.eu",jar:"/oiplayer/plugins/cortado-ovt-stripped-0.6.0.jar",flash:"/oiplayer/plugins/flowplayer-3.2.7.swf",controls:!0,log:"error"},l=this,p=[];return this.each(function(){function u(e,i,a){"video"==e.type&&t(e.div).find(".preview").fadeOut("normal"),e.prevstate=e.state,e.pause();var r=t(e.ctrls).find("div.oiprogress").innerWidth();e.sPerPx=e.duration/(r-11),e.startTime=e.position(),e.scrubStart=t(a).offset().left,t(e.div).mousemove(function(t){h(e,t)}),t(e.div).mouseup(function(i){t(e.ctrls).find("div.pos a").css("background-position","0 -75px"),f(e,i)})}function h(t,e){var i=e.pageX-t.scrubStart,a=t.startTime+i*t.sPerPx;a>=t.duration&&(a=t.duration-.1),a<0&&(a=0),n._seek(t,a),t.seek(a)}function f(e,i){"init"==e.prevstate&&(e.state="init"),"play"==e.prevstate&&e.play(),t(e.div).unbind("mousemove"),t(e.div).unbind("mouseup")}function c(e,i){var a=t(e.ctrls).find("div.oiprogress").innerWidth(),r=i.pageX-t(e.ctrls).find("div.oiprogress").offset().left-5;r=Math.max(Math.min(r,a),0);var o=r/a*e.duration;"video"==e.type&&t(e.div).find(".preview").fadeOut("normal");var s=o/e.duration*100;s+="%",t(e.ctrls).find("div.played").animate({width:s},200),t(e.ctrls).find("div.oiprogress-push").animate({left:s},200,function(){n._seek(e,o)}),e.seek(o)}function v(e,i,a){var r=t(a).innerWidth(),o=Math.max(Math.min(i.pageX-t(a).offset().left,r),0),s=o/r*100;n.volume(e,s)}function y(e,i,a){var r=t(e.ctrls).find("div.volume").innerWidth(),o=e.volume(),s=i.pageX;t(e.div).mousemove(function(t){var i=t.pageX-s,a=o+i/r*100;n.volume(e,a)}),t(e.div).mouseup(function(i){t(e.div).unbind("mousemove").unbind("mouseleave").unbind("mouseup")}),t(e.div).mouseleave(function(i){t(e.div).unbind("mousemove").unbind("mouseleave").unbind("mouseup")})}function m(e){if(M()||I())return void e.player.webkitEnterFullscreen();void 0===e.owidth&&(e.owidth=e.width,e.oheight=e.height),t(e.div).toggleClass("fullscreen");var i;if("flowplayer"==e.myname){var a=e.position(),r=e.state;i=e.player.id(),e.player.unload();var o=t(e.div).find("div.player");t(o).empty().attr("id",i)}if(t(e.div).is(".fullscreen")){e.origoverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",t(e.div).width("100%").height("100%"),e.width=t(window).width(),"top"==e.ctrlspos?e.height=t(window).height():e.height=t(e.div).height()-t(e.ctrls).height(),t(e.player).width(e.width).height(e.height),t(e.div).find("div.player").height(e.height),t(e.div).find(".preview").width(e.width).height(e.height),t(window).scrollTop(0).scrollLeft(0);var n=E(e);t(e.ctrls).css("margin-left",Math.round((e.width-n)/2)+"px"),t("div.oiplayer").not(".fullscreen").css("margin-left","-9999px"),t(document).bind("keydown",function(t){"27"==t.keyCode&&m(e)}),"top"==e.ctrlspos&&"audio"!=e.type&&(t(e.div).unbind("mouseover").unbind("mouseleave"),t(e.div).mouseover(function(i){t(e.ctrls).fadeIn()}).mouseout(function(i){"init"!=e.state&&i.pageY>t(this).offset().top+t(this).height()&&t(e.ctrls).fadeOut("slow")}))}else t(document).unbind("keydown"),t("div.oiplayer").css("margin-left","0"),document.documentElement.style.overflow=e.origoverflow,e.width=e.owidth,e.height=e.oheight,t(e.player).width(e.width).height(e.height),t(e.div).find("div.player").height(e.height),t(e.div).find(".preview").width(e.width).height(e.height),"top"==e.ctrlspos?t(e.div).width(e.width).height(e.height):t(e.div).width(e.width).height(e.height+t(e.ctrls).height()),t(e.ctrls).css("margin-left",Math.round((e.width-E(e))/2)+"px");"flowplayer"==e.myname&&(e.create(i,e.url,e.config),setTimeout(function(){e.seek(a),"play"==r&&e.play()},1e3))}function g(n,s,d){var l,p=t.map(s,function(e){return t(e).attr("type")}),u=t.map(s,function(e){return t(e).attr("src")});0===u.length&&(u[0]=t(n).attr("src"),p[0]="unknown");var h=P(n),f=w(n,p,u);return"media"==f.type?l=new i:"cortado"==f.type?l=new a:"msie_cortado"==f.type?l=new r:"flash"==f.type?l=new o:(l=new e,l.type="none"),null!==h.duration&&(l.duration=h.duration),null!==h.start&&(l.start=h.start),null!==h.id&&(l.id=h.id),l.info=f.type+":"+f.url,l.init(n,f.url,d),l}function w(e,i,a){var r={},o=C(i,a);if(void 0!==o)return r.type="media",r.url=o,r;if(void 0===r.type&&(o=b(i,a),void 0!==o&&(x("application/x-java-applet")||navigator.javaEnabled())))if(t.browser.msie){var n=clientcaps.getComponentVersion("{08B0E5C0-4FCB-11CF-AAA5-00401C608500}","ComponentID");n&&(r.type="msie_cortado",r.url=o),"audio"==e.tagName.toLowerCase()&&(r.type="msie_cortado",r.url=o)}else r.type="cortado",r.url=o;if(void 0===r.type){for(var s=0;s<i.length;s++)if(i[s].indexOf("video/flv")>-1||i[s].indexOf("video/x-flv")>-1)return r.url=a[s],r.type="flash",r;for(var d=0;d<i.length;d++)if(i[d].indexOf("video/mp4")>-1)return r.url=a[d],r.type="flash",r}return i.length>0&&"unknown"==i[0]?(r.url=a[0],r.type="media",r):r}function b(t,e){for(var i,a=0;a<t.length;a++)if(t[a].indexOf("video/ogg")>-1||t[a].indexOf("audio/ogg")>-1||t[a].indexOf("application/ogg")>-1||t[a].indexOf("application/x-ogg")>-1){i=e[a];break}return i}function C(t,e){var i=document.createElement("video"),a=document.createElement("audio");if(i.canPlayType||a.canPlayType)for(var r=0;r<t.length;r++){if("probably"==i.canPlayType(t[r])||"probably"==a.canPlayType(t[r]))return e[r];if("maybe"==i.canPlayType(t[r])||"maybe"==a.canPlayType(t[r]))return e[r]}}function x(t){var e=!1;if(navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var i=0;i<navigator.mimeTypes.length;i++)navigator.mimeTypes[i].type.indexOf(t)>-1&&(e=!0);return e}function k(e,i){var a=i.poster;if(!a&&"audio"==i.type){var r=t(e).find("img")[0];i.width=t(r).attr("width")>0?parseInt(t(r).attr("width")):i.width,i.height=t(r).attr("height")>0?parseInt(t(r).attr("height")):i.height,a=t(r).attr("src"),t(r).remove()}if(a)return'<img class="preview '+i.type+'" src="'+a+'" width="'+i.width+'" height="'+i.height+'" alt="click to play" title="click to play" />'}function _(t){var e='<div class="oipcontrols"><div class="play"><a href="#play">play</a></div><div class="time">00:00</div><div class="progress"><div class="oiprogress"><div class="back bar"></div><div class="loaded bar"></div><div class="played bar"></div><div class="oiprogress-container"><div class="oiprogress-push"><div class="pos"><a href="#pos">pos</a></div></div></div></div></div><div class="timeleft">-'+(t.position()>0?n._totime(t.duration-t.position()):n._totime(t.duration))+"</div>"+("video"!=t.type||I()?"":'<div class="screen"><a href="#fullscreen">fullscreen</a></div>')+(M()?"":'<div class="sound"><a href="#sound">mute</a><div class="volume"><div class="slider"><div class="fill"><!-- empty --></div><div class="thumb"><div><!-- empty --></div></div></div></div></div>')+"</div>";return e}function E(e){var i=e.width;return"top"==e.ctrlspos&&(i=e.width-32),i>620&&(i=620),t(e.ctrls).width(i),t(e.ctrls).find("div.sliderwrap").width(i-190),i}function P(e){var i={};if(t(e).attr("class")){var a=t(e).attr("class").split(" ");for(var r in a){var o=a[r];if(o.indexOf("oip_ea_")!=-1){var n=o.substring("oip_ea_".length),s=n.indexOf("_");i[n.substring(0,s)]=n.substring(s+1)}}}return i}function I(){return null!==navigator.userAgent.match(/iPhone|iPod/i)}function M(){return null!==navigator.userAgent.match(/iPad/i)}s&&t.extend(d,s);var O=t(this).find("video,audio");if(0===O.length){O=t(this).find("video");var j=t(this).find("audio");t.merge(O,j)}t.each(O,function(e,i){var a=t(i).attr("id"),r=t(i).find("source");0===r.length&&(r=t(l).find("source")),M()||I()||t(i).wrap('<div class="oiplayer"><div class="player"></div></div>');var o=t(i).closest("div.oiplayer"),s=g(i,r,d);t(o).addClass(s.type),s.div=o,s.myname.indexOf("cortado")>-1&&(t(o).find("div.player").empty(),t(o).find("div.player").append(s.player),t(o).attr("id",a)),(M()||I())&&"audio"==s.type&&t(i).css("height","0px").hide(),(s.myname.indexOf("cortado")>-1||"flowplayer"==s.myname)&&t(l).find(".html5warning").hide();var u=k(o,s);if(t(o).prepend(u),t(o).height(s.height).width(s.width),d.controls&&void 0!==s.url){I()||M()?(t(i).after(_(s)),s.ctrls=t(i).next("div.oipcontrols"),t(s.ctrls).addClass("ios")):(t(o).append(_(s)),s.ctrls=t(o).find("div.oipcontrols"),t(i).removeAttr("controls")),d.controls===!0?(t(o).height(t(o).height()+30),s.ctrlspos="bottom"):((s.myname.indexOf("cortado")>-1||I()||M())&&(d.controls=d.controls.replace("top",""),0===d.controls.length&&(d.controls="white")),t(s.ctrls).addClass(d.controls),d.controls.indexOf("top")>-1?(s.ctrlspos="top","audio"!=s.type&&"init"!=s.state&&t(s.ctrls).hide()):("audio"!=s.type&&t(o).height(t(o).height()+30),s.ctrlspos="bottom"));var h=E(s);"video"==s.type||t(s.div).find("img").length>0?t(s.ctrls).css("margin-left",Math.round((s.width-h)/2)+"px"):t(s.ctrls).css("margin-left","0px")}void 0===s.url&&(t(o).addClass("inavailable"),t(o).append("<p>No compatible source found to play.</p>")),"info"==d.log&&n.msg(s,s.info),p.push(s),void 0!==a&&a.length>0&&t("#"+a).data("oiplayer",{player:s})}),t.each(p,function(e,i){t(i.div).find(".preview").click(function(t){t.preventDefault(),n.start(i)}),d.controls&&(t(i.ctrls).find("div.play a").click(function(e){e.preventDefault(),"pause"==i.state?(i.play(),0===t(i.ctrls).find("div.pause").length&&t(i.ctrls).find("div.play").addClass("pause")):"play"==i.state?(i.pause(),t(i.ctrls).find("div.play").removeClass("pause")):n.start(i)}),n.volume(i,80),t(i.ctrls).find("div.sound a").click(function(e){e.preventDefault(),t(i.ctrls).find("div.sound").toggleClass("muted"),i.mute()}),t(i.ctrls).find("div.volume").click(function(t){t.preventDefault(),v(i,t,this)}),t(i.ctrls).find("div.volume div.thumb > div").mousedown(function(t){t.preventDefault(),y(i,t,this)}),t(i.ctrls).find("div.screen a").click(function(t){t.preventDefault(),m(i)}),t(i.ctrls).find("div.loaded, div.back").click(function(t){c(i,t)}),t(i.ctrls).find("div.pos a").click(function(t){t.preventDefault()}),t(i.ctrls).find("div.oiprogress-push").mousedown(function(e){e.preventDefault(),t(this).find("a").css("background-position","0 -100px"),u(i,e,this)}),"top"==i.ctrlspos&&"audio"!=i.type&&t(i.div).mouseover(function(e){t(i.ctrls).fadeIn()}).mouseleave(function(e){"init"!=i.state&&t(i.ctrls).fadeOut("slow")})),t(i.div).bind("oiplayerended",function(e,i){t(i.ctrls).fadeIn("slow")})})})},player:function(e){if(t("#"+e).length>0){var i=t("#"+e).data("oiplayer");return i.player}},start:function(e,i){void 0===e.myname&&(e=n.player(e)),"init"!=e.state&&"ended"!=e.state&&void 0!==e.fpstate||t(e.div).trigger("oiplayerplay",[e]),"video"==e.type?t(e.div).find(".preview").fadeOut("normal"):t(e.div).find(".preview").css("z-index","1"),i>0&&n.jump(e,i),e.config.controls&&(t(e.ctrls).find("div.play").addClass("pause"),"init"==e.state&&n._follow(e),void 0===e.fpstate&&n._follow(e)),e.play(),"info"==e.config.log&&n.msg(e,"Playing... "+e.info+" ("+e.duration+")")},pause:function(t){void 0===t.myname&&(t=n.player(t)),t.pause()},volume:function(e,i){if(void 0===e.myname&&(e=n.player(e)),void 0===i)return e.volume();var a=Math.max(Math.min(i,100),0);e.volume(a),t(e.ctrls).find("div.volume div.fill").css("width",a+"%"),t(e.ctrls).find("div.volume div.thumb > div").css("left",a+"%")},jump:function(e,i){void 0===e.myname&&(e=n.player(e)),"video"==e.type?t(e.div).find(".preview").fadeOut("normal"):t(e.div).find(".preview").css("z-index","1"),n._seek(e,i),e.seek(i)},position:function(t,e){return void 0===t.myname&&(t=n.player(t)),t.position()},msg:function(e,i){t('<div class="oiplayerinfo"></div>').text(i).insertAfter(e.div).hide().fadeIn()},_seek:function(e,i){if(!isNaN(i)&&i>0){var a=i/e.duration*100;a+="%",t(e.ctrls).find("div.played").width(a),t(e.ctrls).find("div.oiprogress-push").css("left",a),e.duration>0&&t(e.ctrls).find("div.timeleft").text("-"+n._totime(e.duration-i)),t(e.ctrls).find("div.time").text(n._totime(i))}t(e.ctrls).find("div.time").text(n._totime(i)),t(e.ctrls).find("div.timeleft").text("-"+n._totime(e.duration-i)),i>0?t(e.ctrls).find("div.progress").addClass("changed"):t(e.ctrls).find("div.progress").removeClass("changed")},_follow:function(t){var e=0,i=0,a=null;t.fpstate="following",clearInterval(a),a=setInterval(function(){var r=t.position();r!=i?i=r:e++,"pause"!=t.state&&"ended"!=t.state&&n._seek(t,r),e>999&&clearInterval(a)},100)},_controlswidth:function(e){var i;return i="top"==e.ctrlspos?e.width-32:e.width,i>620&&(i=620),t(e.ctrls).width(i),t(e.ctrls).find("div.sliderwrap").width(i-190),i},_totime:function(t){function e(t){var e=Math.floor(t/3600),a=Math.floor(t/60);return t=Math.floor(t-60*a),e>=1?(a-=60*e,e+":"+i(a)+":"+i(t)):i(a)+":"+i(t)}function i(t){return t=parseInt(t,10),t<10?"0"+t:t}return t<0&&(t=0),e(Math.floor(t))}};t.fn.oiplayer=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.oiplayer"):n.init.apply(this,arguments)},e.prototype.init=function(t,e,i){this._init(t,e,i)},e.prototype.mute=function(){},e.prototype.play=function(){},e.prototype.pause=function(){},e.prototype.position=function(){},e.prototype.seek=function(t){},e.prototype.info=function(){},e.prototype.volume=function(t){},e.prototype._init=function(e,i,a){this.state="init",this.el=e,this.player=e,this.url=i,this.config=a,this.type=e.tagName.toLowerCase(),this.poster=t(this.player).attr("poster"),this.autoplay=t(this.player).attr("autoplay"),void 0===this.autoplay&&(this.autoplay=!1),this.autobuffer=t(this.player).attr("autobuffer"),void 0===this.autobuffer&&(this.autobuffer=!1),this.controls=t(this.player).attr("controls"),void 0===this.controls&&(this.controls=!1),void 0===this.duration&&(this.duration=0),this.width=t(this.player).attr("width")>0?parseInt(t(this.player).attr("width")):320;var r=240;"audio"==this.type&&(r=32),this.height=t(this.player).attr("height")>0?parseInt(t(this.player).attr("height")):r,"audio"==this.type&&t(this.player).removeAttr("width").removeAttr("height")},i.prototype=new e,i.prototype.init=function(e,i,a){if(this._init(e,i,a),this.url=i,a.controls){var r=this;r.buffered=0,this.player.addEventListener("durationchange",function(e){!isNaN(r.player.duration)&&r.player.duration>0&&"Infinity"!=r.player.duration&&(r.duration=r.player.duration,"info"==a.log&&t.oiplayer&&t.oiplayer.msg(r,"set duration: "+r.duration))},!1),this.player.addEventListener("progress",function(e){if(r.player.buffered&&r.player.buffered.length>0){var i=r.player.buffered.end(0);if(i>r.buffered){r.buffered=i;var a=i/r.duration*100+"%";t(r.ctrls).find("div.loaded").width(a)}}},!1),this.player.addEventListener("canplaythrough",function(e){if(r.player.buffered&&r.player.buffered.length>0){var i=r.player.buffered.end(0);if(i>r.buffered){r.buffered=i;var a=i/r.duration*100+"%";t(r.ctrls).find("div.loaded").width(a)}}},!1),this.player.addEventListener("loadedmetadata",function(e){"video"!=r.type||320!=r.width&&240!=r.height||(r.width=t(r.player).attr("width")>0?parseInt(t(r.player).attr("width")):r.player.videoWidth,r.height=t(r.player).attr("height")>0?parseInt(t(r.player).attr("height")):r.player.videoHeight,t.oiplayer._controlswidth(r),t(r.div).width(r.width).height(r.height))},!1),this.player.addEventListener("loadeddata",function(e){if(r.player.buffered&&r.player.buffered.length>0){var i=r.player.buffered.end(0);if(i>r.buffered){r.buffered=i;var a=i/r.duration*100+"%";t(r.ctrls).find("div.loaded").width(a)}}},!1),this.player.addEventListener("playing",function(e){"init"!=r.state&&"ended"!=r.state||t.oiplayer.start(r),r.state="play",t(r.ctrls).find("div.play").addClass("pause")},!1),this.player.addEventListener("pause",function(e){r.state="pause",t(r.ctrls).find("div.play").removeClass("pause")},!1),this.player.addEventListener("volumechange",function(e){r.player.muted||0===r.volume()?t(r.ctrls).find("div.sound").addClass("muted"):t(r.ctrls).find("div.sound").removeClass("muted")},!1),this.player.addEventListener("ended",function(e){"ended"!=r.state&&(r.state="ended",t(r.div).trigger("oiplayerended",[r])),t(r.div).find("div.play").removeClass("pause")},!1)}return this.player},i.prototype.play=function(){"0"==this.player.readyState&&this.player.load(),this.player.play(),this.state="play"},i.prototype.pause=function(){this.player.pause(),this.state="pause"},i.prototype.mute=function(){this.player.muted?this.player.muted=!1:this.player.muted=!0},i.prototype.position=function(){try{return this.pos=this.player.currentTime,this.pos}catch(e){t.oiplayer.msg(self,"Error: "+e)}return-1},i.prototype.seek=function(t){this.player.currentTime=t},i.prototype.volume=function(t){return void 0===t?100*this.player.volume:void(this.player.volume=Math.min(Math.max(t/100,0),1))},i.prototype.info=function(){},a.prototype=new e,a.prototype.init=function(e,i,a){this._init(e,i,a),this.url=i;var r=a.server+a.jar,o=!0,n=this.height;"audio"==this.type&&(o=!1,n=12),this.player=document.createElement("object"),t(this.player).attr("classid","java:com.fluendo.player.Cortado.class"),t(this.player).attr("style","display:block;width:"+this.width+"px;height:"+n+"px;"),t(this.player).attr("type","application/x-java-applet"),t(this.player).attr("archive",r),this.width&&t(this.player).attr("width",this.width),this.height&&t(this.player).attr("height",this.height);var s={code:"com.fluendo.player.Cortado.class",archive:r,url:i,duration:Math.round(this.duration),keepAspect:"true",showStatus:this.controls,video:o,audio:"true",seekable:"auto",autoPlay:this.autoplay,bufferSize:"256",bufferHigh:"50",bufferLow:"5"};for(var d in s){var l=document.createElement("param");l.name=d,l.value=s[d],this.player.appendChild(l)}return this.player},a.prototype.play=function(){this.player.doPlay(),this.state="play"},a.prototype.pause=function(){if(this.player.doPause(),this.state="pause",this.position()>=this.duration){this.state="ended",t(this.div).trigger("oiplayerended",[this]);try{this.player.doStop()}catch(e){}}},a.prototype.mute=function(){t.oiplayer.msg(this,"Sorry. Cortado currently does not support changing volume with Javascript.")},a.prototype.volume=function(e){t.oiplayer.msg(this,"Sorry. Cortado currently does not support changing volume with Javascript.")},a.prototype.position=function(){return"init"!=this.state?(this.pos=this.player.getPlayPosition(),this.pos):0},a.prototype.seek=function(t){this.player.doSeek(t/this.duration)},a.prototype.info=function(){},r.prototype=new a,r.prototype.init=function(e,i,a){this._init(e,i,a);var r=a.server+a.jar,o=!0,n=this.height;"audio"==this.type&&(o=!1,n=12);var s=document.createElement("div"),d='<object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93"   codebase="http://java.sun.com/update/1.5.0/jinstall-1_5_0-windows-i586.cab"   id="msie_cortadoplayer_oiplayer"  allowscriptaccess="always" width="'+this.width+'" height="'+n+'"> <param name="code" value="com.fluendo.player.Cortado" /> <param name="archive" value="'+r+'" /> <param name="url" value="'+this.url+'" />  <param name="duration" value="'+Math.round(this.duration)+'" />  <param name="local" value="true" />  <param name="keepAspect" value="true" />  <param name="video" value="'+o+'" />  <param name="audio" value="true" />  <param name="seekable" value="auto" />  <param name="showStatus" value="'+this.controls+'" />  <param name="bufferSize" value="256" />  <param name="bufferHigh" value="50" />  <param name="bufferLow" value="5" />  <param name="autoPlay" value="'+this.autoplay+'" />  <strong>Your browser does not have a Java Plug-in. <a href="http://java.com/download">Get the latest Java Plug-in here</a>.</strong></object>';return t(s).html(d),this.player=s.firstChild,this.player},o.prototype=new e,o.prototype.init=function(e,i,a){this._init(e,i,a);var r=document.createElement("div");t(e).closest("div.oiplayer").html(r);var o=t(e).attr("id");return t(r).attr("id",o),t(r).addClass("player"),this.create(r,i,a)},o.prototype.create=function(e,i,a){var r=a.server+a.flash,o=void 0===this.duration?0:Math.round(this.duration);if(this.player=$f(e,{src:r,width:this.width,height:this.height,wmode:"opaque"},{clip:{url:this.url,autoPlay:this.autoplay,duration:o,scaling:"fit",autoBuffering:!0},plugins:{controls:null}}),a.controls){var n=this,s=this.player.getCommonClip();this.player.onMute(function(){t(n.div).find("div.sound").addClass("muted")}),this.player.onUnmute(function(){t(n.div).find("div.sound").removeClass("muted")}),this.player.onVolume(function(){n.player.getStatus().muted||0===n.volume()?t(n.ctrls).find("div.sound").addClass("muted"):t(n.ctrls).find("div.sound").removeClass("muted")}),this.player.onLoad(function(){var e=null;clearInterval(e),e=setInterval(function(){if(n.duration<1){var i=n.player.getCommonClip().fullDuration;try{i=n.player.getCommonClip().fullDuration}catch(r){}i>0&&(n.duration=i)}else{clearInterval(e),"info"==a.log&&t.oiplayer.msg(n,"set duration: "+n.duration);try{var o=n.player.getStatus().bufferEnd,s=o/n.duration*100;s+="%",t(n.div).find("div.loaded").width(s)}catch(r){}}},500)}),s.onBufferFull(function(){}),s.onStart(function(){var e=n.player.getClip().fullDuration;e>0&&(n.duration=e),n.autoplay&&(t.oiplayer._follow(n),t.oiplayer.hidepreview(n),t(n.div).find("div.play").addClass("pause"),n.state="play"),"ended"==n.fpstate&&t.oiplayer.start(n)}),s.onPause(function(){t(n.div).find("div.play").removeClass("pause"),n.state="pause"}),s.onResume(function(){t(n.div).find("div.play").addClass("pause"),void 0===n.fpstate&&n.duration>0&&t.oiplayer.start(n),n.state="play"}),s.onFinish(function(){n.fpstate="ended","ended"!=n.state&&(n.state="ended",t(n.div).trigger("oiplayerended",[n])),t(n.div).find("div.play").removeClass("pause")})}return this.player},o.prototype.play=function(){4==this.player.getState()?this.player.resume():this.player.play(),this.state="play"},o.prototype.pause=function(){3==this.player.getState()&&this.player.pause(),this.state="pause"},o.prototype.mute=function(){this.player.getStatus().muted===!0?this.player.unmute():this.player.mute()},o.prototype.position=function(){return this.pos=parseInt(this.player.getTime()),this.pos},o.prototype.seek=function(t){t=parseInt(t),this.player.seek(t)},o.prototype.volume=function(t){return void 0===t?this.player.getVolume():void this.player.setVolume(t)},o.prototype.info=function(){}}(jQuery);